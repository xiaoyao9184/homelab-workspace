version: "3.3"

volumes:
  data:
    name: external_vol-nfs-server-data
    external: true

services:
  nfs-server:
    image: erichough/nfs-server:2.2.1
    env_file: external_env-server.env
    volumes:
      - data:/data
      - /lib/modules:/lib/modules:ro
      - {{ VARS.BIND_EXPORTS }}:/etc/exports
    cap_add:
      - SYS_ADMIN
      - SYS_MODULE
      - CAP_SYS_ADMIN
    network_mode: host
    container_name: nfs-server
    restart: always
    user: root
    privileged: true
