---


- name: file-name.list.yml|set _name
  ansible.builtin.set_fact:
    _name: "{{ name }}"

- name: file-name.list.yml|set _find by dict
  when: _name.option_find | type_debug == "dict" 
  ansible.builtin.set_fact:
    _find: "{{ _name.option_find }}"

- name: file-name.list.yml|set _find by string
  when: _name.option_find | type_debug == "str" 
  ansible.builtin.set_fact:
    _find: 
      paths: "{{ _name.option_find }}"

- name: file-name.list.yml|find in remote
  when: _name.location != 'local'
  ansible.builtin.find: "{{ _find }}"
  register: find_result

- name: file-name.list.yml|find in local
  when: _name.location == 'local'
  delegate_to: localhost
  connection: local
  ansible.builtin.find: "{{ _find }}"
  register: find_result

- name: file-name.list.yml|set _name
  ansible.builtin.set_fact:
    "{{ _name.result_var }}": "{{ find_result.files | map(attribute='path') | list }}"

- name: file-name.list.yml|print result_var
  ansible.builtin.debug:
    var: "{{ _name.result_var }}"

- name: file-name.list.yml|reset _name
  ansible.builtin.set_fact:
    _name: !!null