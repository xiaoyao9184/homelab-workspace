---

# https://stackoverflow.com/questions/66193508/ansible-transforming-list-to-dictionary-with-items2dict

- name: list-attr.rename|set rename_result
  ansible.builtin.set_fact:
    rename_result: []

- name: list-attr.rename|rename item attr in list
  ansible.builtin.set_fact:
    rename_result: "{{ rename_result + [item_new] }}"
  vars:
    keys_old: "{{ rename_item.keys() | difference([rename.old]) }}"
    keys_new: "{{ keys_old | list + [rename.new] }}"
    vaules_new: "{{ keys_old | map('extract', rename_item) | list + [rename_item[rename.old]] }}"
    item_new: "{{ dict(keys_new|zip(vaules_new)) }}"
  loop: "{{ rename.list }}"
  loop_control:
    loop_var: rename_item
