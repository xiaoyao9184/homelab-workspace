---


- name: install
  vars:
    run_wsl: |
      ansible-playbook \
        --ask-pass \
        --inventory $PWD/ansible \
        $PWD/../../../windows/chocolatey/ansible-playbook.install.yml
  vars_prompt:
    - name: group_select
      prompt: "What is packages group?"
      private: no
      default: all
  hosts: windows
  tasks: 

    - include_tasks: "{{ playbook_dir }}/../../.seed/ansible-tasks/list-group.select.yml"
      vars:
        group:
          data: "{{ chocolatey.packages }}"
          select: "{{ group_select }}"
          register: "_packages"

    - name: install through chocolatey
      loop: "{{ _packages }}"
      chocolatey.chocolatey.win_chocolatey:
        name: "{{ item }}"
        state: present
      register: package_result
      until: "package_result is not failed"
      retries: 3
      delay: 5
